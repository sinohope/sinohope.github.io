<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-develop/mpc-waas-api/quick-start/waas/ws-1-node">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">MPC Node User Guide | SINOHOPE</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.sinohope.com/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.sinohope.com/img/social-card.png"><meta data-rh="true" property="og:url" content="https://docs.sinohope.com/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MPC Node User Guide | SINOHOPE"><meta data-rh="true" name="description" content="1. Sinohope WaaS MPC Technology Introduction"><meta data-rh="true" property="og:description" content="1. Sinohope WaaS MPC Technology Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.sinohope.com/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node"><link data-rh="true" rel="alternate" href="https://docs.sinohope.com/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.sinohope.com/zh-Hant/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node" hreflang="zh-Hant"><link data-rh="true" rel="alternate" href="https://docs.sinohope.com/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SINOHOPE RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SINOHOPE Atom Feed"><link rel="stylesheet" href="/assets/css/styles.1cb3919a.css">
<link rel="preload" href="/assets/js/runtime~main.920f7206.js" as="script">
<link rel="preload" href="/assets/js/main.6dc1c50f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="SINOHOPE Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="SINOHOPE Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SINOHOPE</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Use</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/use/cases/products">Products&amp;Solutions</a></li><li><a class="dropdown__link" href="/docs/use/user-guide/SUMMARY">User Guide</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/learn/news/WaaS 2024-08-19">News</a></li><li><a class="dropdown__link" href="/blog">Blog</a></li><li><a href="https://space.bilibili.com/3493266041342842/channel/series" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sinohope Lecture<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Develop</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/develop/get-started/quick-start">Get Started</a></li><li><a class="dropdown__link" href="/docs/develop/openloop-api/quick-start/qs-1-intro">OpenLoop API</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/develop/mpc-waas-api/quick-start/qs-1-openapi">MPC WaaS API</a></li><li><a class="dropdown__link" href="/docs/develop/full-custody-waas-api/quick-start/qs-1-custody">Full Custody WaaS API</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sinohope" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-Hant/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hant">繁體中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop/mpc-waas-api/quick-start/qs-1-openapi">Open API Quick Start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/develop/mpc-waas-api/quick-start/waas/">MPC WaaS Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;MPC WaaS Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/develop/mpc-waas-api/quick-start/waas/ws-1-node">MPC Node User Guide</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop/mpc-waas-api/quick-start/qs-3-babylon">babylon staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop/mpc-waas-api/quick-start/qs-4-web3sdk">web3 SDK</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/mpc-waas-api">Open API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Open API&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/mpc-waas-api/sinohope-waas-api">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/callback-ap-is">Callback APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Callback APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/common-ap-is">Common APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Common APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/account-address-ap-is">Account&amp;address APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Account&amp;address APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/transaction-ap-is">Transaction APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transaction APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/brc-20-ap-is">Brc20 APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Brc20 APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/rune-ap-is">Rune APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rune APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/advanced-ap-is">Advanced APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/mpc-node-ap-is">MPC Node APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;MPC Node APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/auto-sweeping-and-gas-station-ap-is">Auto Sweeping and Gas station APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Auto Sweeping and Gas station APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/develop/mpc-waas-api/v-1-waas-mpc-staking-create">Babylong Staking APIs</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/develop/mpc-waas-api/quick-start/waas/"><span itemprop="name">MPC WaaS Quick Start</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MPC Node User Guide</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12"><h1>MPC Node User Guide</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-sinohope-waas-mpc-technology-introduction">1. Sinohope WaaS MPC Technology Introduction<a class="hash-link" href="#1-sinohope-waas-mpc-technology-introduction" title="Direct link to heading">​</a></h2><p>Threshold Signature Scheme (TSS) is an important branch of digital signature. It is a cryptographic technology based on Secure Multi-Party Computation (MPC) and an important research direction of MPC key management.</p><p>Sinohope&#x27;s WaaS (Wallet as a Service) is a wallet-as-a-service solution based on MPC-TSS technology. Sinohope&#x27;s WaaS service requires customers and the platform to collaborate in a distributed manner, each holding a private key sharding. Based on the <a href="https://eprint.iacr.org/2021/060" target="_blank" rel="noopener noreferrer">MPC-CMP protocol</a> (ECDSA) and <a href="https://link.springer.com/chapter/10.1007/3-540-47719-5_33#chapter-info" target="_blank" rel="noopener noreferrer">SS01 protocol</a> (EdDSA), it implements customer-led off-chain multi-party signatures. MPC Node is a dedicated program package provided by Sinohope WaaS for customers to manage their own private key sharding.</p><p>Sinohope adopts a 3-3 multi-signature mode, where customers hold one private key sharding and Sinohope holds two private key sharding.</p><ul><li>MPC Node 1: Sinohope is responsible for management, and this Node will always be online.</li><li>MPC Node 2: Sinohope is responsible for management, and this Node will always be online.</li><li>MPC Node 3: The customer is responsible for management and should also keep the automated process always online.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-mpc-node-deployment-and-implementation">2. MPC Node deployment and implementation<a class="hash-link" href="#2-mpc-node-deployment-and-implementation" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-environmental-preparation">2.1 Environmental preparation<a class="hash-link" href="#21-environmental-preparation" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-common-server-environment">2.1.1 Common Server Environment<a class="hash-link" href="#211-common-server-environment" title="Direct link to heading">​</a></h4><p>General-purpose servers refer to Cloud as a Service Provider EC or TCE-metal servers operated and maintained independently by customers.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="minimum-configuration">Minimum configuration<a class="hash-link" href="#minimum-configuration" title="Direct link to heading">​</a></h5><ul><li>CPU: AMD64 or ARM64 architecture, 2 cores, frequency 2.0 GHz</li><li>Memory: 4G</li><li>Hard drive: 64G SSD</li><li>Operating system: Ubuntu 20.04 or latest. (Note: Theoretically supports all systems that can run Docker)</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-configuration">Recommended configuration<a class="hash-link" href="#recommended-configuration" title="Direct link to heading">​</a></h5><ul><li>CPU: AMD64 or ARM64 architecture, 4 cores, frequency 3.0 GHz</li><li>Memory: 8G</li><li>Hard drive: 128G SSD</li><li>Operating system: Ubuntu 20.04 or latest. (Note: Theoretically supports all systems that can run Docker)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-tee-server-environment">2.1.2 TEE server environment<a class="hash-link" href="#212-tee-server-environment" title="Direct link to heading">​</a></h4><p>You can refer to Azure&#x27;s SGX Cloud as a Service to quickly complete the configuration of the machine, <a href="https://learn.microsoft.com/zh-cn/azure/confidential-computing/quick-create-marketplace" target="_blank" rel="noopener noreferrer">Quick Start: Create an Intel SGX VM in the Azure Marketplace</a> . When purchasing a Microsoft Cloud SGX server, please select Ubuntu 20.04 and DCsv3 series support standards. For configuration instructions, please refer to: <a href="https://learn.microsoft.com/zh-cn/azure/confidential-computing/virtual-machine-solutions-sgx" target="_blank" rel="noopener noreferrer">Solutions on Azure for Intel SGX</a> .</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="minimum-configuration-1">Minimum configuration<a class="hash-link" href="#minimum-configuration-1" title="Direct link to heading">​</a></h5><ul><li>CPU: Intel-SGX architecture, 2 cores</li><li>Memory: 4G</li><li>Hard drive: 64G SSD</li><li>Operating System: Ubuntu 20.04</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-configuration-1">Recommended configuration<a class="hash-link" href="#recommended-configuration-1" title="Direct link to heading">​</a></h5><ul><li>CPU: Intel-SGX architecture, 2 cores</li><li>Memory: 16 G</li><li>Hard drive: 128G SSD</li><li>Operating system: Ubuntu 20.04 or latest. (Note: Theoretically supports all systems that can run Docker)</li></ul><p><img loading="lazy" alt="img" src="/assets/images/sgx-95e28b80c9f36854e2139ded34492f6e.png" width="2756" height="1416" class="img_ev3q"></p><ul><li>Check the machine&#x27;s support for SGX if Azure Cloud as a Service is already configured by default.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt install cpuid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cpuid | grep SGX</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Check the SGX driver installation if Azure Cloud as a Service is configured by default.</li></ul><p>If your system supports FLC, make sure your Linux kernel version is 5.11 or higher. You can check with uname -r. If you are unable to upgrade the kernel, you can install the DCAP driver.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls /dev/*sgx*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="213-network-requirements">2.1.3 network requirements<a class="hash-link" href="#213-network-requirements" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="firewall-inbound-rules">Firewall inbound rules<a class="hash-link" href="#firewall-inbound-rules" title="Direct link to heading">​</a></h5><ul><li>Open port 443, MPC Node service provides HTTPS service to users.</li><li>Turn off all other ports without affecting operation and security.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="firewall-outbound-rules">Firewall outbound rules<a class="hash-link" href="#firewall-outbound-rules" title="Direct link to heading">​</a></h5><ul><li>Installation phase:<ul><li>Access to apt sources to install base dependencies</li><li>Access docker installation source to install docker</li><li>Access to docker.io registry mirroring repository</li></ul></li><li>Service phase:<ul><li>Access to client-configured callback servers</li><li>Can access mpc-proxy, need to communicate with other MPC nodes when signing.</li><li>Turn off all other outbound IPs without affecting operation and security.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="214-install-docker">2.1.4 install Docker<a class="hash-link" href="#214-install-docker" title="Direct link to heading">​</a></h4><p>Please refer to the <a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">official documentation</a> to install Docker. When the startup script in the Sinohope MPC Node installation package is executed, it will automatically check the installation status of Docker. If it is not installed, it cannot run.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-deployment-and-configuration">2.2 Deployment and configuration<a class="hash-link" href="#22-deployment-and-configuration" title="Direct link to heading">​</a></h3><p>Deploying and configuring MPC Node is a basic requirement for using Sinohope WaaS service. Please refer to the following steps to complete the deployment and operation of MPC Node.</p><ol><li>Prepare: Open Sinohope WaaS account; Prepare deployment environment, obtain and verify MPC Node installation package.</li><li>Initialize the node, generate the node ID and the node public key required for deploying the callback service.</li><li>(On demand) Deploy and configure your callback service;</li><li>Bind MPC Node, log in to the web console to configure MPC Node, and bind your Node ID with your organization account.</li><li>Start MPC Node, the node will continue to run and automatically drive the operation of MPC protocol as needed. DKG will be completed after a moment, and then the &quot;key share status&quot; will be &quot;generated&quot; in the Web Console MPC Node management interface.</li><li>❗️❗️ important: back up MPC Node local database files safely and properly!</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-get-and-verify-the-installation-package">2.2.1 get and verify the installation package<a class="hash-link" href="#221-get-and-verify-the-installation-package" title="Direct link to heading">​</a></h4><ul><li>Software packages (mainly management scripts and configuration files) are released through open source projects. Download link: <a href="https://github.com/sinohope/sinohope-mpc-node/releases" target="_blank" rel="noopener noreferrer">sinohope-mpc-node/releases</a>. The programs located under <code>env/general</code> are used in the normal CPU environment, and the programs located under <code>env/intel-sgx</code> are used in the Intel sgx CPU environment.</li><li>The Releases page will contain the sha256 value of the main content. Please check the consistency of the hash value after downloading the content to the target location.</li></ul><p>The required initial files are as follows:</p><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sinohope-mpc-node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config.toml （Configuration File）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── node.sh （Manage Scripts）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>The node.sh script is used to control the behavior of the mpc-node service, such as generating shard private keys, starting services, etc. Executing <code>./node.sh help</code> will get instructions for all commands.</li><li>The config.toml example and description are as follows:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[app]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The name of the software is reflected in the log.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name = &quot;mpc-node&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3 shards, a, b, c. Cannot be modified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">party-id = &quot;a&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># User type, cannot be modified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">account-type = &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[log]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Log level: 0: Panic 1: Fatal 2: Error 3: Warn 4: Info 5: Debug 6: Trace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[log.stdout]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Whether to enable terminal log output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Log level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">level=6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[log.file]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Whether to enable file log output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Log level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">level=6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The log file path is the internal path of docker. When node.sh start is executed, the current directory will be mapped to /tmp/mpc-node in docker.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path = &quot;/tmp/mpc-node/logs/mpc-node.log&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Shard storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[storage]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Storage engine type, divided into bolt and sgx, the default is bolt. Bolt is file database storage, and sgx is text file storage. If using the intel-sgx-tee environment, it must be specified as sgx storage.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">engine = &quot;bolt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># t/n The combined password can be a 1/1 password or a 2/3 password. Just enter any two passwords. If t&gt;1, the password must be generated by a special tool and cannot be generated freely.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">n=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The fragmented data storage path is the internal path of docker.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db-file-path = &quot;/tmp/mpc-node/asset.db&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The service address and port are the internal address and port of docker.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unseal-server-address = &quot;0.0.0.0:8080&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># mpc server is responsible for connecting three mpc nodes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[mpc-service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># node needs to use websocket to establish a connection with mpc server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protocol = &quot;wss&quot; .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #URL address of mpc server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">address = &quot;api.sinohope.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># URL path of mpc server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path = &quot;/proxy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Encryption of &quot;signature result&quot;, mpc encrypts the raw_data signature result once, so that others cannot use it even if they get the signature result.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[encrypt-signature]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Whether to enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The Secp256r1 public key path used for encryption is the internal path of docker.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public-key-path = &quot;/tmp/mpc-node/encrypt_sig_public.pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Signature callback service. Before signing, mpc-node sends the data to be signed to the callback service, and the callback checks whether the signature is allowed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[callback]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">retry-times=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sleep-seconds = 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># callback list, if the list is empty, the callback will not take effect.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[callback.server]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># callback address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">address = &quot;http://10.151.100.41:9090&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The result returned by mpc-node calling callback is signed using the Secp256r1 private key. mpc-node verifies the correctness of the signature through the public key. The path of the public key is the internal path of docker.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public-key-path = &quot;/tmp/mpc-node/callback_server_public.pem&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>After successful initialization of MPC Node, the asset.db file and logs directory will be automatically created.</li></ul><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sinohope-mpc-node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── node.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── asset.db (Important locally generated data is stored here, and backup and recovery are the process of restoring data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── logs (Log file directory)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-initialize-node">2.2.2 Initialize Node<a class="hash-link" href="#222-initialize-node" title="Direct link to heading">​</a></h4><p>First, execute the following command to start the mpc-node service. The service must be started before executing any other commands.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ./node.sh start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mpc-node instance name: mpc-node, unseal server address: 127.0.0.1:10080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a0c4e4380926d588016570a5d99a7b875a997c841d70472a4bcf1972b200ec49</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mpc-node server address: 127.0.0.1:10080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: Firstly, the script will automatically perform some environmental checks, such as determining whether Docker is installed and determining user permissions. If you need to run multiple mpc-nodes simultaneously on the current system, you need to distinguish them in the form of directories. If you try to run multiple mpc-nodes in the same directory, only the first initialized node can run normally. If you want to run two mpc-nodes, their names are assumed to be mpc-node-a and mpc-node-b, then you need to create two directories, their names can be: mpc-node-a and mpc-node-b. Then copy the node.sh and config.toml files to the above two directories respectively.</p><p>When deploying MPC Node for the first time, please execute the following command on the command line and complete the initialization according to the prompts.</p><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ./node.sh init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="language-Shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">New password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Retype new password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;data&quot;:{&quot;node_id&quot;:&quot;sinoMzA1OTMwMTMwNjA3MmE4NjQ4Y2UzZDAyMDEwNjA4MmE4NjQ4Y2UzZDAzMDEwNzAzNDIwMDA0MDdlMDgyNzA5OTU1NTUxMzljODExMzQ3YTBkZjVmZjVhYmY1ZmM1MTFiOWFiM2U0MWE5N2MwMDlkODA3OGY3ZTc1MzlhYjA2M2ZkNzczZTliOTJjZWU5MjI1ZTVhMTFhYmJjNzExOWRlNDkwYjNiMzZkNTM3MWFmZDRkYjBiYzI=&quot;,&quot;public_key&quot;:&quot;-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEB+CCcJlVVROcgRNHoN9f9av1/FEb\nmrPkGpfACdgHj351OasGP9dz6bks7pIl5aEau8cRneSQs7NtU3Gv1NsLwg==\n-----END PUBLIC KEY-----\n&quot;},&quot;status&quot;:&quot;ok&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The main task of the init command is to initialize node information, including:</p><ul><li>Set a password for the MPC node This password is used to protect your private key sharding and other private data. Please keep it properly, do not leak it, and do a Safety Redundancy backup . The node will be required to enter the password when it starts up.</li><li>Create a node ID. Each MPC node has a unique identifier ID. You will need to use this node ID to uniquely associate your MPC node with your WaaS organization account.</li><li>Create an ECDSA key pair when communicating with the callback-server.</li></ul><p>Password Instructions:</p><ul><li>The password must include uppercase letters, lowercase letters, numbers, and special characters, with a length of at least 12 characters.</li><li>For the sinohope-mpc-node password, it adopts the t-n combination method, where t must be less than or equal to n (e.g., for 2/3, only 2 segments of the password are required during initialization and unsealing).</li><li>If <code>storage.t</code> in the configuration is set to 1, the operation command only needs to be executed once, and the password can be manually created.</li><li>If <code>storage.t</code> in the configuration is greater than 1, the operation command needs to be executed t times, and t-n passwords need to be generated using specialized tools and cannot be created arbitrarily. <a href="https://github.com/sinohope/shamir-pasasword" target="_blank" rel="noopener noreferrer">click to get the password generation tool</a></li><li>T-n passwords require manual modification of <code>storage.t</code> and <code>storage.n</code> in the config.toml file.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-optional-deploy-and-configure-callback-service">2.2.3 (Optional) Deploy and Configure Callback Service<a class="hash-link" href="#223-optional-deploy-and-configure-callback-service" title="Direct link to heading">​</a></h4><p>MPC Node provides a callback mechanism for you to perform risk control, and this callback service is optional (in production environments, it is strongly recommended that you develop and deploy callback services).</p><p>After configuring the callback service for the MPC Node, the MPC Node will call back the specified interface before initiating any MPC business (such as signing), requesting authorization from the callback service for the current MPC business. Only when your callback service explicitly returns the ACCEPT status, will the MPC business begin to execute.</p><p>In addition, when you use the function of message signing or direct signing of the original data source, MPC Node will provide the signing result to you through the callback interface for your business use.</p><p>For details on the development, deployment, and configuration of callback services, please refer to the &quot;MPC Node callback mechanism&quot; section.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="224-bind-mpc-node">2.2.4 Bind MPC Node<a class="hash-link" href="#224-bind-mpc-node" title="Direct link to heading">​</a></h4><p>After completing the previous steps, you can log in to Sinohope Web Console with an account with administrator privileges, and complete the association binding of MPC Node on the &quot;Settings&quot; - &quot;MPC Node&quot; page. Here, you need to enter the Node ID generated during MPC Node initialization.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="225-unseal-mpc-node-service">2.2.5 unseal MPC Node service<a class="hash-link" href="#225-unseal-mpc-node-service" title="Direct link to heading">​</a></h4><p>After binding the MPC Node, start the MPC Node service with the following command.</p><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ./node.sh unseal </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh unseal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter current password: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;data&quot;:&quot;in-bkey success&quot;,&quot;status&quot;:&quot;ok&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the service starts running, return to the web console MPC Node configuration interface. Normally, wait a moment to see the &quot;key share status&quot; as &quot;generated&quot;. At the same time, the interface will display your organization&#x27;s MPC root public key information.</p><p><img loading="lazy" alt="img" src="/assets/images/mpc-node-c68a2d846433981c1e03c415271b6a6f.png" width="1953" height="760" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="226-️️-important-database-backup">2.2.6 ❗️❗️ important: database backup<a class="hash-link" href="#226-️️-important-database-backup" title="Direct link to heading">​</a></h4><p>The MPC Node local database file  <code>asset.db</code>  stores important data such as your private key sharding, all encrypted using a strong key derived from the password you set for MPC Node via the KDF function.</p><p>Private key sharding is related to the security and availability of funds. The private key sharding managed by Sinohope is safeguarded and backed up by a series of highly available and disaster recovery solutions based on multi-level and multi-region platforms. At the same time, you can also apply for backup of all sharding private keys of your organization, thus fully controlling all three sharding private keys.</p><p><strong>And for the private key sharding that exists in your local database file, you must complete the Safety Redundancy backup by yourself. Please take sufficient security measures, remote multiple copies, backup your database file, and the password you set for MPC Node.</strong></p><p><strong>It is recommended that database files be kept separate from passwords to reduce the risk of data leakage.</strong></p><p><strong>If your MPC Node server or service fails, data is damaged, or becomes unavailable in the future, you can only restore it by redeploying the MPC Node service with the database, files, and passwords you backed up. Sinohope will not be able to help you restore your MPC Node service!!</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-mpc-node-complete-interactive-command-introduction">3. MPC Node complete interactive command introduction<a class="hash-link" href="#3-mpc-node-complete-interactive-command-introduction" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start">Start<a class="hash-link" href="#start" title="Direct link to heading">​</a></h3><p>Please execute the following command in the command line:</p><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ./node.sh start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="language-Shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mpc-node instance name: mpc-node, unseal server address: 127.0.0.1:10080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a0c4e4380926d588016570a5d99a7b875a997c841d70472a4bcf1972b200ec49</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mpc-node server address: 127.0.0.1:10080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initialization">Initialization<a class="hash-link" href="#initialization" title="Direct link to heading">​</a></h3><p>Please execute the following command in the command line:</p><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ./node.sh init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="language-Shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">New password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Retype new password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;data&quot;:{&quot;node_id&quot;:&quot;sinoMzA1OTMwMTMwNjA3MmE4NjQ4Y2UzZDAyMDEwNjA4MmE4NjQ4Y2UzZDAzMDEwNzAzNDIwMDA0MDdlMDgyNzA5OTU1NTUxMzljODExMzQ3YTBkZjVmZjVhYmY1ZmM1MTFiOWFiM2U0MWE5N2MwMDlkODA3OGY3ZTc1MzlhYjA2M2ZkNzczZTliOTJjZWU5MjI1ZTVhMTFhYmJjNzExOWRlNDkwYjNiMzZkNTM3MWFmZDRkYjBiYzI=&quot;,&quot;public_key&quot;:&quot;-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEB+CCcJlVVROcgRNHoN9f9av1/FEb\nmrPkGpfACdgHj351OasGP9dz6bks7pIl5aEau8cRneSQs7NtU3Gv1NsLwg==\n-----END PUBLIC KEY-----\n&quot;},&quot;status&quot;:&quot;ok&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unseal-the-service">Unseal the service<a class="hash-link" href="#unseal-the-service" title="Direct link to heading">​</a></h3><p>Please execute the following command in the command line:</p><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh unseal </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh unseal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter current password: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;data&quot;:&quot;in-bkey success&quot;,&quot;status&quot;:&quot;ok&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: The script will read the password and start the service in docker</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mpc-node-other-commands">MPC Node Other Commands<a class="hash-link" href="#mpc-node-other-commands" title="Direct link to heading">​</a></h3><p>Note: The main commands to start the service are init and start. Other commands are optional and can be consulted as needed.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="view-node-id-and-callback-public-key">View node-id and callback public key<a class="hash-link" href="#view-node-id-and-callback-public-key" title="Direct link to heading">​</a></h4><p>This command can view the MPC Node ID and callback service communication public key, and can only be used when the MPC Node is running.</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="language-Shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh info   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_id&quot;: &quot;sinoMzA1OTMwMTMwNjA3MmE4NjQ4Y2UzZDAyMDEwNjA4MmE4NjQ4Y2UzZDAzMDEwNzAzNDIwMDA0MmFmNGY0Y2I5ZmM1MGFjMWUzNzIxMzM2Y2IyMmJmYzMzMDg4YjJmNGM4OTEyZjZhNDE4ZmNlY2JmZWFhMzIwMjNlMzg0MGE1YjBkODI3YWE5ODE1N2Y1MTE5Y2M2YTdiYzQ2NWNmN2EzNzc0MTkwNjdmYzc5ZGNjMjQ0YjgxZTU=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;public_key&quot;: &quot;-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEKvT0y5/FCsHjchM2yyK/wzCIsvTI\nkS9qQY/Oy/6qMgI+OEClsNgnqpgVf1EZzGp7xGXPejd0GQZ/x53MJEuB5Q==\n-----END PUBLIC KEY-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state&quot;: &quot;unsealed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;: &quot;ok&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="change-password">Change password<a class="hash-link" href="#change-password" title="Direct link to heading">​</a></h4><p>This command is used to modify the MPC Node password. Enter old password, Please make sure that the MPC Node is in normal operation (complete MPC Node binding, and the node is online normally).</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh reset</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh reset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter current password: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;data&quot;:&quot;re-bkey-init success&quot;,&quot;status&quot;:&quot;ok&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command is used to modify the MPC Node password. Enter a new password, Please make sure that the MPC Node is in normal operation (complete MPC Node binding, and the node is online normally).</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh cmreset</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>示例：</p><div class="language-JSON codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JSON codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh cmreset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">New password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Retype new password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;status&quot;: &quot;ok&quot;, &quot;data&quot;: &quot;re-bkey success&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stop-service">Stop service<a class="hash-link" href="#stop-service" title="Direct link to heading">​</a></h4><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="manually-check-the-environment">Manually check the environment<a class="hash-link" href="#manually-check-the-environment" title="Direct link to heading">​</a></h4><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh check</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-to-help">Command to help<a class="hash-link" href="#command-to-help" title="Direct link to heading">​</a></h4><div class="language-Bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-mpc-node-callback-mechanism">4. MPC Node callback mechanism<a class="hash-link" href="#4-mpc-node-callback-mechanism" title="Direct link to heading">​</a></h2><p>After starting up, MPC Node will automatically establish a long link with Sinohope backend to receive tasks sent by Sinohope backend. By default, MPC Node does not enable callback mechanism, and MPC Node will automatically complete the execution of all tasks.</p><p>If the callback mechanism is enabled, the customer needs to develop a callback verification service to verify whether the tasks issued by Sinohope are reasonable and ultimately decide whether to cooperate with Sinohope to complete the signature.</p><p>The development of callback service can refer to the callback service example provided by Sinohope: <a href="https://github.com/sinohope/mpc-node-callback-demo" target="_blank" rel="noopener noreferrer">GitHub - sinohope/mpc-node-callback-demo</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-configure-the-callback-validation-service">4.1 Configure the callback validation service<a class="hash-link" href="#41-configure-the-callback-validation-service" title="Direct link to heading">​</a></h3><p>Some initialization configuration work needs to be done on the host where the callback server is deployed. The specific steps are as follows:</p><ul><li>Generate ECDSA private key for callback server</li></ul><div class="language-Go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl ecparam -genkey -name prime256v1 -out private_key.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Export the ECDSA public key of the callback server</li></ul><div class="language-Go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl ec -in private_key.pem -pubout -out callback_server_public.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Copy the exported ECDSA public key (i.e. callback_server_public file) to the machine where the MPC Node is located, and specify the location of the callback_server_public file in the MPC Node configuration file:</li></ul><div class="language-TOML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TOML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[callback]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">retry-times = 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sleep-seconds = 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[callback.server]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address = &quot;http://&lt;callback url&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public-key-path = &quot;./callback_server_public.pem&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Copy the MPC Node&#x27;s ECDSA public key to the callback server related configuration file</li></ul><p>How to obtain the ECDSA public key of MPC Node:</p><ul><li>After the initialization of MPC Node is completed, the ECDSA public key of MPC Node can be queried by the following command:</li></ul><div class="language-TOML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TOML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Example output:</li></ul><div class="language-Shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./node.sh info   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">checking update...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;node_id&quot;: &quot;sinoMzA1OTMwMTMwNjA3MmE4NjQ4Y2UzZDAyMDEwNjA4MmE4NjQ4Y2UzZDAzMDEwNzAzNDIwMDA0MmFmNGY0Y2I5ZmM1MGFjMWUzNzIxMzM2Y2IyMmJmYzMzMDg4YjJmNGM4OTEyZjZhNDE4ZmNlY2JmZWFhMzIwMjNlMzg0MGE1YjBkODI3YWE5ODE1N2Y1MTE5Y2M2YTdiYzQ2NWNmN2EzNzc0MTkwNjdmYzc5ZGNjMjQ0YjgxZTU=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;public_key&quot;: &quot;-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEKvT0y5/FCsHjchM2yyK/wzCIsvTI\nkS9qQY/Oy/6qMgI+OEClsNgnqpgVf1EZzGp7xGXPejd0GQZ/x53MJEuB5Q==\n-----END PUBLIC KEY-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state&quot;: &quot;unsealed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;: &quot;ok&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The public key is the ECDSA public key used by MPC Node for callback service.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-develop-callback-validation-service">4.2 Develop callback validation service<a class="hash-link" href="#42-develop-callback-validation-service" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="421-signature-and-verification">4.2.1 signature and verification<a class="hash-link" href="#421-signature-and-verification" title="Direct link to heading">​</a></h4><p>The data between MPC Node and callback service is signed by their respective ECDSA private keys, and then the other party uses the pre-configured public key to verify the signature according to the specified rules. Only when the signature is passed can it be considered a legitimate request.</p><p>The following is the data structure for communication between the current MPC Node and the callback service. Please be careful not to change the order of fields arbitrarily.</p><p>Request:</p><div class="language-Go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Check struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CallbackId    string `json:&quot;callback_id,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequestType   string `json:&quot;request_type,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequestDetail `json:&quot;request_detail,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExtraInfo     `json:&quot;extra_info,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type RequestDetail struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    T            int      `json:&quot;t,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    N            int      `json:&quot;n,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Cryptography string   `json:&quot;cryptography,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PartyIds     []string `json:&quot;party_ids,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PublicKey   string `json:&quot;public_key,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Path        string `json:&quot;path,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message     string `json:&quot;message,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Coin        string `json:&quot;coin,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FromAddress string `json:&quot;from_address,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ToAddress   string `json:&quot;to_address,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount      string `json:&quot;amount,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Fee         string `json:&quot;fee,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GasPrice    string `json:&quot;gas_price,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GasLimit    string `json:&quot;gas_limit,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Signature   string `json:&quot;signature,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ExtraInfo struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SinoId    string `json:&quot;sino_id,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequestId string `json:&quot;request_id,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response:</p><div class="language-Go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Response struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status    string        `json:&quot;status,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Error     string        `json:&quot;error,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Data      *ResponseData `json:&quot;data,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Signature string        `json:&quot;signature,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type ResponseData struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CallbackId string `json:&quot;callback_id,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SinoId     string `json:&quot;sino_id,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RequestId  string `json:&quot;request_id,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Action     string `json:&quot;action,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WaitTime   string `json:&quot;wait_time,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-generate-request-signature">1. Generate Request Signature<a class="hash-link" href="#1-generate-request-signature" title="Direct link to heading">​</a></h5><ul><li>MPC Node constructs a Check structure based on the type of request.</li><li>Serialize the constructed Check structure in JSON to obtain the Message.</li><li>MPC Node uses its own ECDSA private key to sign the message and obtain the signature.</li><li>MPC Node sets Signature to the HTTP request header, with Key as Sigature.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-request-signature-verification">2. Request signature verification<a class="hash-link" href="#2-request-signature-verification" title="Direct link to heading">​</a></h5><ul><li>The callback service uses the Check structure to parse the HTTP request of the MPC Node and obtain the Check data of this request.</li><li>The callback service serializes the Check data obtained in JSON to obtain the Message to be verified.</li><li>The callback service obtains the Signature from the HTTP request, and then verifies the Signature by combining Mesage and the pre-configured MPC Node public key.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-generate-response-signature">3. Generate Response Signature<a class="hash-link" href="#3-generate-response-signature" title="Direct link to heading">​</a></h5><ul><li>The callback service generates the above Response based on its own decision and fills the corresponding fields in the Response.Data.</li><li>The callback service serializes the Response.Data in JSON to obtain the Message.</li><li>The callback service uses its own ECDSA private key to sign the Message, obtains the Signature, and assigns the Signature to the Response. Signature field.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-response-signature-verification">4. Response signature verification<a class="hash-link" href="#4-response-signature-verification" title="Direct link to heading">​</a></h5><ul><li>MPC Node receives the response of the callback service and serializes the Response.Data field in JSON to obtain the Message.</li><li>MPC Node verifies Response. Signature by combining Message and pre-configured callback service public key.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="422-check">4.2.2 check<a class="hash-link" href="#422-check" title="Direct link to heading">​</a></h4><p>Each time the keygen and sign business mpc-node will request the user for risk control through the check interface. Only when the callback service explicitly replies Approve can the relevant business be allowed to start.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-http-interface">1. HTTP interface<a class="hash-link" href="#1-http-interface" title="Direct link to heading">​</a></h5><p>path: /check</p><p>method: post</p><p>Body: JSON-encoded data</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2request">2、Request<a class="hash-link" href="#2request" title="Direct link to heading">​</a></h5><table><thead><tr><th>参数</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>callback_id</td><td>string</td><td>callback request unique ID</td></tr><tr><td>request_type</td><td>string</td><td>callback request is a string type, there are six values: keygen, sign, pre-sign, pre-sign-online, bip340-schnorr-sign, taproot-sign</td></tr><tr><td>request_detail</td><td>struct</td><td>Callback request details, including a series of key information of the request. Different callback request types correspond to different request_detail structures; the format is JSON serialized string</td></tr><tr><td>extra_info</td><td>struct</td><td>callback request auxiliary information, including some additional relevant information of the request; format is JSON serialized string</td></tr></tbody></table><ul><li>When request_type == keygen , the request_detail structure is defined as follows:</li></ul><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Threshold</td><td>int</td><td>signature threshold</td></tr><tr><td>party_ids</td><td>[]string</td><td>Collection of node IDs involved in generating private keys</td></tr><tr><td>Cryptography</td><td>string</td><td>signature algorithm. ecdsa-secp256k1/eddsa-ed25519</td></tr></tbody></table><ul><li>When request_type is sign or bip340-schnorr-sign or taproot-sign or pre-sign or pre-sign-online, the request_detail structure is defined as follows:</li></ul><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>sign_type</td><td>string</td><td>Transaction type to be signed: 1. Ordinary transaction; 2. EIP191/EIP712 signature; 3. RawData signature;</td></tr><tr><td>public_key</td><td>string</td><td>public key corresponding to the root public key</td></tr><tr><td>path</td><td>string</td><td>bip32 derived path</td></tr><tr><td>message</td><td>string</td><td>message to be signed</td></tr><tr><td>tx_info</td><td>json</td><td>Transaction Details</td></tr></tbody></table><p>The structure of tx_info is defined as follows:</p><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>VaultId</td><td>string</td><td>vault id</td></tr><tr><td>WalletId</td><td>string</td><td>wallet id</td></tr><tr><td>requestId</td><td>string</td><td>requestId of the requestor transaction</td></tr><tr><td>chainSymbol</td><td>string</td><td>chain identifier</td></tr><tr><td>AssetId</td><td>string</td><td>asset id</td></tr><tr><td>From</td><td>string</td><td>from address</td></tr><tr><td>To</td><td>string</td><td>to address</td></tr><tr><td>toTag</td><td>string</td><td>transaction memo</td></tr><tr><td>Amount</td><td>string</td><td>amount</td></tr><tr><td>Fee</td><td>string</td><td>handling fee, for transactions on non-EVM compatible chains of UTXO class, self-set fee, if</td></tr><tr><td>gasPrice</td><td>string</td><td>gasprice</td></tr><tr><td>gasLimit</td><td>string</td><td>gaslimit</td></tr><tr><td>Inputdata</td><td>string</td><td>Ethereum transaction data</td></tr><tr><td>note</td><td>string</td><td>note: Some remarks information that users need.</td></tr><tr><td>curInputId</td><td>string</td><td>inputId of signature data</td></tr><tr><td>tapScriptRoot</td><td>string</td><td>The tree root of taproot script</td></tr><tr><td>publickKey</td><td>string</td><td>The public key of the from address</td></tr><tr><td>extraData</td><td>json</td><td>Detailed data of utxo transactions, including vin, vout</td></tr><tr><td>brc20Details</td><td>json</td><td>brc20Details</td></tr><tr><td>runeDetails</td><td>json</td><td>runeDetails</td></tr><tr><td>pre_sign_signature_id</td><td>string</td><td>preSign signature id</td></tr></tbody></table><ul><li>Structure example of brc20Details:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;method&quot;: &quot;transfer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;ticker&quot;: &quot;helloworkd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;quantity&quot;: &quot;920769938&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;inscriptionId&quot;: &quot;affabbd94763045fb4bc4****************************************0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;step&quot;: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;from&quot;: &quot;1Bt84h23CKi****************&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;to&quot;: &quot;bc1q53ss0p87****************&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Structure example of runeDetails:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;fromAddress&quot;: &quot;1Bt84h23CKi****************&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;toAddress&quot;: &quot;bc1q53ss0p87****************&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;runeName&quot;: &quot;HELLOWORLD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;runeId&quot;: &quot;2818544:3897&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;runeSpacedName&quot;: &quot;HELLO•WORLD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;runeAmount&quot;: &quot;100&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;runeSymbol&quot;: &quot;¤&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;runeDivisibility&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Structure example of extraData:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;toTag&quot;: &quot;TOTAG1637&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;vinList&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;address&quot;: &quot;mwTnMZzAvUzVCQKGkdcAHYW1sMnJCumbJL&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;amount&quot;: 1425593,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;blockHash&quot;: &quot;0000000000000005f9c6962d86854e412bf0cc1d61b5849c0ac2f83d701007a8&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;blockHeight&quot;: 2583605,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;blockState&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;blockTimeStamp&quot;: 1711441887,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;currency&quot;: &quot;btc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;id&quot;: 6909,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;state&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;tag&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;transactionHash&quot;: &quot;17b0378f551ddfda5d512a7304fdc0f33493f0429a479e243f3653d7dca0700e&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;voutIndex&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;voutList&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;address&quot;: &quot;mwTnMZzAvUzVCQKGkdcAHYW1sMnJCumbJL&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;amount&quot;: 22000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>extra_info structure is defined as follows:</li></ul><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>sino_id</td><td>string</td><td>Sinohope&#x27;s internal unique identifier for the business corresponding to the current signature, which is provided in the response when developers call waas APIs such as create_transfer .</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3response">3、Response<a class="hash-link" href="#3response" title="Direct link to heading">​</a></h5><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Status</td><td>string</td><td>status code, when the status code is 0, it indicates that the callback server is executing normally; when the status code is other values, it indicates that some abnormal situations occurred during the execution of the callback server</td></tr><tr><td>Error</td><td>string</td><td>Error message; When the return value of status is not 0, it represents the error message that appears internally in the callback server; When the status is 0 and the risk control result is REJECT, it represents the specific risk control rejection information.</td></tr><tr><td>Data</td><td>json</td><td>requested result data</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="data-structure">Data structure<a class="hash-link" href="#data-structure" title="Direct link to heading">​</a></h4><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>callback_id</td><td>string</td><td>callback_id of this request</td></tr><tr><td>sino_id</td><td>string</td><td>sino_id of this request</td></tr><tr><td>request_id</td><td>string</td><td>request_id of this request</td></tr><tr><td>Action</td><td>string</td><td>Processing result of this request: Approve: Allow Reject: Reject Wait: Retry after waiting</td></tr><tr><td>wait_time</td><td>string</td><td>When action is Wait, this field is used to indicate how long the MPC Node needs to wait, in seconds</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rawdata_signature">rawdata_signature<a class="hash-link" href="#rawdata_signature" title="Direct link to heading">​</a></h4><p>Only when the sign_type of the sign service is 2 or 3 and the MPC Node signature is successful will the original message and signature result be reported to the callback service.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-http-interface-1">1. HTTP interface<a class="hash-link" href="#1-http-interface-1" title="Direct link to heading">​</a></h5><blockquote><p>path: /rawdata_signature</p><p>method: post</p><p>body: JSON-encoded data</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-request">2、 Request<a class="hash-link" href="#2-request" title="Direct link to heading">​</a></h5><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>callback_id</td><td>string</td><td>callback request unique ID</td></tr><tr><td>request_detail</td><td>struct</td><td>Callback request details, including a series of key information of the request. Different callback request types correspond to different request_detail structures; the format is JSON serialized string</td></tr><tr><td>extra_info</td><td>struct</td><td>callback request auxiliary information, including some additional relevant information of the request; different callback request types correspond to different extra_info structures; the format is JSON serialized string</td></tr></tbody></table><p>request_defailt as follows:</p><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Message</td><td>string</td><td>Original message to be signed</td></tr><tr><td>Signature</td><td>string</td><td>signature result</td></tr></tbody></table><ul><li>extra_info structure is defined as follows:</li></ul><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>sino_id</td><td>string</td><td>Sinohope&#x27;s internal unique identifier for the business corresponding to the current signature, which is provided in the response when developers call waas APIs such as create_transfer .</td></tr><tr><td>request_id</td><td>string</td><td>The request ID passed in by the user through the WaaS interface. If the request is not a WaaS interface, Sinohope will automatically generate it internally</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3response-1">3、Response<a class="hash-link" href="#3response-1" title="Direct link to heading">​</a></h5><table><thead><tr><th>Parameters</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Status</td><td>string</td><td>status code, when the status code is 0, it indicates that the callback server is executing normally; when the status code is other values, it indicates that some abnormal situations occurred during the execution of the callback server</td></tr><tr><td>Error</td><td>string</td><td>Error message; When the return value of status is not 0, it represents the error message that appears internally in the callback server; When the status is 0 and the risk control result is REJECT, it represents the specific risk control rejection information.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-activate-callback-verification-service">4.3 Activate callback verification service<a class="hash-link" href="#43-activate-callback-verification-service" title="Direct link to heading">​</a></h3><p>After the callback validation service is configured and started, you need to call./node.sh start to restart the MPC Node.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-mpc-node-signature-result-encryption">5. MPC Node Signature Result Encryption<a class="hash-link" href="#5-mpc-node-signature-result-encryption" title="Direct link to heading">​</a></h2><p>For users deploying an independent mpc-node, the mpc-node can encrypt the signature result when calling the /<code>v1/waas/mpc/web3/sign_message</code> and <code>/v1/waas/mpc/wallet/advance/sign_raw_data</code> interfaces for signing.</p><ul><li>Encryption uses the Secp256r1 algorithm, with public key encryption and private key decryption.</li><li>When user query the signature result using the interface <code>/v1/waas/mpc/web3/sign_result</code>, they need to decrypt it before using it.</li><li>If the mpc-node is configured with a Callback callback service, the signature results received by the callback service also need to be decrypted before use.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-generating-encryption-public-and-private-keys">5.1 Generating Encryption Public and Private Keys<a class="hash-link" href="#51-generating-encryption-public-and-private-keys" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl ecparam -genkey -name prime256v1 -out decrypt_sig_pirvate.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl ec -in decrypt_sig_pirvate.pem -pubout -out encrypt_sig_public.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-setting-up-the-configuration-file">5.2 Setting up the Configuration File<a class="hash-link" href="#52-setting-up-the-configuration-file" title="Direct link to heading">​</a></h3><p>Enable signature result encryption in the config.toml configuration file and specify the public key for encryption.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[encrypt-signature]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public-key-path = &quot;/tmp/mpc-node/encrypt_sig_public.pem&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>If <code>encrypt-signature.enable = true</code>, the mpc-node will encrypt the signature result; otherwise, it returns the original signature result.
<code>encrypt-signature.public-key-path</code> is the public key for encrypting the signature result, in PEM format.</li><li><code>callback.server.public-key-path</code> is used for data verification between the mpc-node and the Callback service. The Callback service signs the communication data with a private key, and the mpc-node verifies the data using this public key, in PEM format.</li><li>Both <code>encrypt-signature.public-key-path</code> and `callback.server.public-key-path`` use the Secp256r1 algorithm. For simplicity, it is recommended to use the same public-private key pair.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-decrypt-the-signature-result">5.3 Decrypt the signature result<a class="hash-link" href="#53-decrypt-the-signature-result" title="Direct link to heading">​</a></h3><p>In the callback service demo, decryption processing is performed on the callback result (encrypted signature data), which can be referred to in the callback service example provided by Sinohope: <a href="https://github.com/sinohope/mpc-node-callback-demo" target="_blank" rel="noopener noreferrer">GitHub - sinohope/mpc-node-callback-demo</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-pre-sign">5.4 pre-sign<a class="hash-link" href="#54-pre-sign" title="Direct link to heading">​</a></h3><p>The MPC signature consumes a CPU and it takes time. Generally, a single signature may take 3-5 seconds to complete. The length of time depends on the performance and network conditions of the MPC-Node. If you want to get a millisecond experience, you can start the pre-sign. After opening, the system will make pre-sign when MPC-Node is free, and use the pre-sign-data before when signing the transaction.</p><ul><li>Preparation before the pre-sign: Signature Callback service supports two types of business types that support Request_type as Pre-Sign and Pre-Sign-Online.</li><li>How to enable pre-sign strategy: At present, you need to contact the administrator, and the administrator will be assisted to use it</li></ul></div></div></div><div class="col col--12"></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/develop/mpc-waas-api/quick-start/waas/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MPC WaaS Quick Start</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/develop/mpc-waas-api/quick-start/qs-3-babylon"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">babylon staking</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-sinohope-waas-mpc-technology-introduction" class="table-of-contents__link toc-highlight">1. Sinohope WaaS MPC Technology Introduction</a></li><li><a href="#2-mpc-node-deployment-and-implementation" class="table-of-contents__link toc-highlight">2. MPC Node deployment and implementation</a><ul><li><a href="#21-environmental-preparation" class="table-of-contents__link toc-highlight">2.1 Environmental preparation</a></li><li><a href="#22-deployment-and-configuration" class="table-of-contents__link toc-highlight">2.2 Deployment and configuration</a></li></ul></li><li><a href="#3-mpc-node-complete-interactive-command-introduction" class="table-of-contents__link toc-highlight">3. MPC Node complete interactive command introduction</a><ul><li><a href="#start" class="table-of-contents__link toc-highlight">Start</a></li><li><a href="#initialization" class="table-of-contents__link toc-highlight">Initialization</a></li><li><a href="#unseal-the-service" class="table-of-contents__link toc-highlight">Unseal the service</a></li><li><a href="#mpc-node-other-commands" class="table-of-contents__link toc-highlight">MPC Node Other Commands</a></li></ul></li><li><a href="#4-mpc-node-callback-mechanism" class="table-of-contents__link toc-highlight">4. MPC Node callback mechanism</a><ul><li><a href="#41-configure-the-callback-validation-service" class="table-of-contents__link toc-highlight">4.1 Configure the callback validation service</a></li><li><a href="#42-develop-callback-validation-service" class="table-of-contents__link toc-highlight">4.2 Develop callback validation service</a></li><li><a href="#43-activate-callback-verification-service" class="table-of-contents__link toc-highlight">4.3 Activate callback verification service</a></li></ul></li><li><a href="#5-mpc-node-signature-result-encryption" class="table-of-contents__link toc-highlight">5. MPC Node Signature Result Encryption</a><ul><li><a href="#51-generating-encryption-public-and-private-keys" class="table-of-contents__link toc-highlight">5.1 Generating Encryption Public and Private Keys</a></li><li><a href="#52-setting-up-the-configuration-file" class="table-of-contents__link toc-highlight">5.2 Setting up the Configuration File</a></li><li><a href="#53-decrypt-the-signature-result" class="table-of-contents__link toc-highlight">5.3 Decrypt the signature result</a></li><li><a href="#54-pre-sign" class="table-of-contents__link toc-highlight">5.4 pre-sign</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/use/user-guide/SUMMARY">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/develop/get-started/quick-start">Developer Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/SinohopeGroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/SINOHOPE_DEV" target="_blank" rel="noopener noreferrer" class="footer__link-item">👨‍💻 💬 👨‍💻<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/sinohope/feedback" target="_blank" rel="noopener noreferrer" class="footer__link-item">Feedback@GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 SINOHOPE. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.920f7206.js"></script>
<script src="/assets/js/main.6dc1c50f.js"></script>
</body>
</html>